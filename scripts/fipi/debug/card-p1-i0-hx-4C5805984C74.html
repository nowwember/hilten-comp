<main>
<div class="top-block">
<div class="proj-nav-panel">
    <a class="header-icon" href="index.php?crproj=E040A72A1A3DABA14C90C97E0B6EE7DC">Открытый банк заданий ЕГЭ&nbsp;|&nbsp;Математика. Базовый уровень</a>
</div>

<div class="filter-title-panel" id="qfilters_block">
    <div class="filter-title-inner">
        <span class="filter-button img-link" onclick="toggleFilters()">
            <i class="filter-button-arrow"></i>
            <span class="filter-title-text">ПОДБОР ЗАДАНИЙ</span>
        </span>
        <span class="filter-title-text-right" id="qcount_block"></span>
    </div>
    <div class="filter-panel">
    <form id="filters_request" target="questions_container" action="questions.php" method="post">
    <input type="hidden" name="search" value="1">
    <input type="hidden" name="pagesize" value="10">
    <input type="hidden" name="proj" value="E040A72A1A3DABA14C90C97E0B6EE7DC">
    <input type="hidden" name="theme"><input type="hidden" name="qlevel"><input type="hidden" name="qkind">
    <input type="hidden" name="qsstruct"><input type="hidden" name="qpos">
    <input type="hidden" name="qid"><input type="hidden" name="zid">
    <input type="hidden" name="solved"><input type="hidden" name="favorite"><input type="hidden" name="blind">
        </form>
    <form id="filters">
        <div class="filter-title">Разделы КЭС</div>
        <div><div><label><input type="checkbox" name="theme" value="1"> Числа и вычисления</label></div><div><label><input type="checkbox" name="theme" value="2"> Уравнения и неравенства</label></div><div><label><input type="checkbox" name="theme" value="3"> Функции и графики</label></div><div><label><input type="checkbox" name="theme" value="4"> Начала математического анализа</label></div><div><label><input type="checkbox" name="theme" value="5"> Множества и логика</label></div><div><label><input type="checkbox" name="theme" value="6"> Вероятность и статистика</label></div><div><label><input type="checkbox" name="theme" value="7"> Геометрия</label></div></div>
        <div class="filter-title">Темы КЭС</div>
        <div class="dropdown">
        <button class="dropdown-toggle btn btn-default btn-block" type="button" onclick="this.parentNode.classList.toggle('open')">Выбор<span class="caret"></span></button>
        <ul class="dropdown-menu"><li class="dropdown-item dropdown-header">1 Числа и вычисления</li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="1.1"> 1.1 Натуральные и целые числа. Признаки делимости целых чисел</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="1.2"> 1.2 Рациональные числа. Обыкновенные и десятичные дроби, проценты, бесконечные периодические дроби</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="1.3"> 1.3 Арифметический корень натуральной степени. Действия с арифметическими корнями натуральной степени</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="1.4"> 1.4 Степень с целым показателем. Степень с рациональным показателем. Свойства степени</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="1.5"> 1.5 Синус, косинус и тангенс числового аргумента. Арксинус, арккосинус, арктангенс числового аргумента</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="1.6"> 1.6 Логарифм числа. Десятичные и натуральные логарифмы</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="1.7"> 1.7 Действительные числа. Арифметические операции с действительными числами. Приближённые вычисления, правила округления, прикидка и оценка результата вычислений</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="1.8"> 1.8 Преобразование выражений</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="1.9"> 1.9 Комплексные числа</label></li><li class="dropdown-item dropdown-header">2 Уравнения и неравенства</li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="2.1"> 2.1 Целые и дробно-рациональные уравнения</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="2.2"> 2.2 Иррациональные уравнения</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="2.3"> 2.3 Тригонометрические уравнения</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="2.4"> 2.4 Показательные и логарифмические уравнения</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="2.5"> 2.5 Целые и дробно-рациональные неравенства</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="2.6"> 2.6 Иррациональные неравенства</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="2.7"> 2.7 Показательные и логарифмические неравенства</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="2.8"> 2.8 Тригонометрические неравенства</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="2.9"> 2.9 Системы и совокупности уравнений и неравенств</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="2.10"> 2.10 Уравнения, неравенства и системы с параметрами</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="2.11"> 2.11 Матрица системы линейных уравнений. Определитель матрицы</label></li><li class="dropdown-item dropdown-header">3 Функции и графики</li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="3.1"> 3.1 Функция, способы задания функции. График функции. Взаимно обратные функции. Чётные и нечётные функции. Периодические функции</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="3.2"> 3.2 Область определения и множество значений функции. Нули функции. Промежутки знакопостоянства. Промежутки монотонности функции. Максимумы и минимумы функции. Наибольшее и наименьшее значение функции на промежутке</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="3.3"> 3.3 Степенная функция с натуральным и целым показателем. Её свойства и график. Свойства и график корня n-ой степени</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="3.4"> 3.4 Тригонометрические функции, их свойства и графики</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="3.5"> 3.5 Показательная и логарифмическая функции, их свойства и графики</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="3.6"> 3.6 Точки разрыва. Асимптоты графиков функций. Свойства функций, непрерывных на отрезке</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="3.7"> 3.7 Последовательности, способы задания последовательностей</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="3.8"> 3.8 Арифметическая и геометрическая прогрессии. Формула сложных процентов</label></li><li class="dropdown-item dropdown-header">4 Начала математического анализа</li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="4.1"> 4.1 Производная функции. Производные элементарных функций</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="4.2"> 4.2 Применение производной к исследованию функций на монотонность и экстремумы. Нахождение наибольшего и наименьшего значения функции на отрезке</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="4.3"> 4.3 Первообразная. Интеграл</label></li><li class="dropdown-item dropdown-header">5 Множества и логика</li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="5.1"> 5.1 Множество, операции над множествами. Диаграммы Эйлера – Венна</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="5.2"> 5.2 Логика</label></li><li class="dropdown-item dropdown-header">6 Вероятность и статистика</li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="6.1"> 6.1 Описательная статистика</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="6.2"> 6.2 Вероятность</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="6.3"> 6.3 Комбинаторика</label></li><li class="dropdown-item dropdown-header">7 Геометрия</li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="7.1"> 7.1 Фигуры на плоскости</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="7.2"> 7.2 Прямые и плоскости в пространстве</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="7.3"> 7.3 Многогранники</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="7.4"> 7.4 Тела и поверхности вращения</label></li><li class="dropdown-item"><label><input type="checkbox" name="theme" value="7.5"> 7.5 Координаты и векторы</label></li></ul>
        <div class="shadow" onclick="this.parentNode.classList.toggle('open')"></div>
        </div>
        <div class="filter-title">Тип ответа</div>
        <div><label><input type="checkbox" name="qkind" value="ILI_STD_SELECTN"> Выбор ответов из предложенных вариантов</label> <label><input type="checkbox" name="qkind" value="ILI_STD_SHORT"> Краткий ответ</label> <label><input type="checkbox" name="qkind" value="ILI_EXT_ACCORD"> Установление соответствия</label> </div>
        <div class="additional-params-panel">
        <div class="task-number-panel">
            <div class="filter-title">Номер задания</div>
            <div><input type="text" name="qid"></div>
        </div>
        <div class="task-number-panel">
            <div class="filter-title">Номер группы</div>
            <div><input type="text" name="zid"></div>
        </div>
        </div>

        <div class="additional-params-panel">
        <!---->
        <div class="filter-title">Искать задания</div>
        <div class="radio-row">
            <label><input name="solved" type="radio" value="" checked=""> Все</label>
            <label><input name="solved" type="radio" value="0"> Нерешенные</label>
            <label><input name="solved" type="radio" value="1"> Решенные</label>
        </div>
        <div class="radio-row">
            <label><input name="favorite" type="radio" value="" checked=""> Все</label>
            <label><input name="favorite" type="radio" value="1"> Только в "Избранном"</label>
            <label><input name="favorite" type="radio" value="0"> Все, кроме включенных в "Избранное"</label>
        </div>
        
        <!---->
        </div>

        <div class="button-panel">
            <div class="filter-button button-find" onclick="filterQuestions()">Найти</div>
            <div class="filter-button button-clear" onclick="resetFilters()">Сбросить фильтр</div>
        </div>

    </form>
    </div>
</div>

<div class="pager-panel-block">
<div class="pager-panel" id="top_pager"></div>
<div class="pager-n-panel" id="n_pager" style="display:none">
    <div class="filter-button" onclick="toggleNPager()"><span class="filter-button-text">Выбрать страницу</span><i class="filter-button-arrow"></i></div>
    <div class="filter-panel">
        <div class="task-number-panel">
            <div class="filter-title">Номер страницы</div>
            <div><input type="text" id="n_pager_pno" onchange="checkNPageCorrectness()" onkeypress="checkNPageCorrectness()" onkeyup="checkNPageCorrectness()"></div>
        </div>
        <div class="button-panel">
            <div class="filter-button button-find" onclick="gotoNPage()" id="n_pager_goto">Перейти</div>
        </div>
    </div>
</div>
</div>

</div>

<div id="loader_container"><div class="loader"><img src="img/loading_spinner.gif"> Загрузка заданий</div></div>

<iframe id="questions_container" name="questions_container" src="questions.php?proj=E040A72A1A3DABA14C90C97E0B6EE7DC&amp;init_filter_themes=1" style="height: 0px;"></iframe> <!--  -->

<script type="text/javascript">
var page = 1;
var pagesize = 10;
var count = 0;

function toggleFilters() {
	document.getElementById('qfilters_block').classList.toggle('open')
}

function resetFilters(){
	var form = document.getElementById('filters');
	for(var i=0; i<form.elements.length; i++) {
		var e = form.elements[i];
		if (e.nodeName == 'INPUT') {
			if (e.type == 'checkbox')
			    e.checked = false;
	        else if (e.type == 'radio')
	            e.checked = (e.value == '')
	        else
	            e.value = '';
        }
    }
}


function updatePager()
{
    var last = Math.ceil(count/pagesize);
    var pages = [];
    if (last>1) {
        if (last<=10) {
	       for (let i=1; i<=last; i++) {
	         pages.push(i);
	       }
	    }
	    else if (page<=6)
	    {
	        for (let i=1; i<=8; i++) {
	            pages.push(i);
	        }
	        pages.push('...');
	        pages.push(last);
	    }
	    else if (page>last-6)
	    {
	        pages.push(1);
	        pages.push('...');
	        for (let i=1; i<=8; i++) {
	            pages.push(last - 8 + i);
	        }
	    }
	    else
	    {
	        pages.push(1);
	        pages.push('...');
	        for (let i=-3; i<=3; i++) {
	            pages.push(page + i);
	        }
	        pages.push('...');
	        pages.push(last);
	    }
    }
    pagerHTML = '';
    for(var i=0; i<pages.length; i++) {
    	var p = pages[i];
        pagerHTML += "<li" + (p=='...'?" class='separator'":" class='" + (p==page?"active ":"") + "button' p='"+p+"'") + "> " + p + "</li>";
    }
    var topPager = document.getElementById('top_pager');
    var bottomPager = document.getElementById('bottom_pager');
    var nPager = document.getElementById('n_pager');

    if (pagerHTML) {
        pagerHTML = "<ul class=pager>" + pagerHTML + "</ul>";
        topPager.innerHTML = pagerHTML;
        topPager.style.display = 'block';
        if (bottomPager) {
            bottomPager.innerHTML = pagerHTML;
            bottomPager.style.display = 'block';
        }
        var pagers = [topPager, bottomPager];
        for (var i=0; i<pagers.length; i++) {
            var pgr = pagers[i];
        	if (!pgr) continue;
        	var btns = pgr.getElementsByClassName('button');
        	for (var j=0; j<btns.length; j++) {
        		var b = btns[j];
        		if (!b.classList.contains('active'))
            		b.onclick = onPageClick;
            }
        }
        if (last > 15) {
            nPager.style.display = '';
            nPager.classList.remove('open');
        } else {
            nPager.style.display = 'none';
        }
    } else {
        topPager.style.display = 'none';
        nPager.style.display = 'none';
        if (bottomPager)
            bottomPager.style.display = 'none';
    }
}

function onPageClick(e) {
	var p = e.target.getAttribute('p');
	e.preventDefault();
	if (p)
	    setPage(Number(p));
}

function setQCount(n, p, sz) {
    var qcntblock = document.getElementById('qcount_block');
    qcntblock.style.display = '';
    qcntblock.innerHTML = n? "Кол-во заданий: " + n : "";
    count = n;
    if (p) page = p;
    if (sz) pagesize = sz;
    updatePager();
}

function setPage(n) {
	page = n;
	updatePager();
	showLoader();
	window.scrollTo(0, 0);
    var now = new Date;
    document.getElementById('questions_container').src = 'questions.php?proj=E040A72A1A3DABA14C90C97E0B6EE7DC&page=' + (page-1) + '&pagesize=' + pagesize  + '&rfsh='+encodeURIComponent(now);
}

function filterQuestions() {
    setQCount(0);
    var qcntblock = document.getElementById('qcount_block');
    qcntblock.style.display = '';
	updatePager();
	showLoader();
	toggleFilters();

	var formIn = document.getElementById('filters');
	var formOut = document.getElementById('filters_request');

    var elnames = ['theme','qkind','qlevel','qsstruct','qpos','blind']
    for(var i=0; i<elnames.length; i++) {
    	formOut.elements[elnames[i]].value = '';
	}

	var storageVals = {'favorite': 'FAV', 'solved': 'SOLVED'}

	for(var i=0; i<formIn.elements.length; i++) {
		var e = formIn.elements[i];
		if (e.nodeName == 'INPUT' && e.name) {
			if (e.type == 'checkbox') {
			    if (e.checked)
			        formOut.elements[e.name].value += (formOut.elements[e.name].value?",":"") + e.value;
	        } else if (e.type == 'radio') {
	            if (e.checked) {
			        formOut.elements[e.name].value = e.value;
			        			        if (e.value != "" && storageVals[e.name]) {
			        	st_val = localStorage.getItem("OS:E040A72A1A3DABA14C90C97E0B6EE7DC:"+storageVals[e.name]) || '';
			        	formOut.elements[e.name].value += ':'+st_val;
		            }
			        		        }
	        } else {
	            formOut.elements[e.name].value = e.value;
	        }
        }
    }

	formOut.submit();
}

function showLoader() {
	var qcontainer = document.getElementById('questions_container');
	qcontainer.style.height = 0;
	var lcontainer = document.getElementById('loader_container');
	lcontainer.style.display = '';
	lcontainer.innerHTML = "<div class='loader'><img src='img/loading_spinner.gif'> Загрузка заданий</div>";
}

function setContainerSize(height){
    document.getElementById('loader_container').style.display = 'none';
    document.getElementById('questions_container').style.height = height + 'px';
}

function toggleNPager() {
	document.getElementById('n_pager').classList.toggle('open');
	var input = document.getElementById('n_pager_pno');
	input.value = '';
	input.focus();
	checkNPageCorrectness();
}

function checkNPageCorrectness() {
    var pno = document.getElementById('n_pager_pno').value;
    var correct = false;
    if (pno.match(/\s*^\d+\s*$/)) {
    	pno = Number(pno.replace(/\s*/g, ""));
    	var last = Math.ceil(count/pagesize);
	    if (pno > 0 && pno <= last)
	        correct = true;
    }
    var btn = document.getElementById('n_pager_goto');
    if (correct) {
        btn.classList.remove('disabled');
        if (window.event.charCode == 13)
            gotoNPage();
    } else if (!btn.classList.contains('disabled'))
        btn.classList.add('disabled');
}

function gotoNPage() {
    if (document.getElementById('n_pager_goto').classList.contains('disabled'))
        return;
    var pno = Number(document.getElementById('n_pager_pno').value.replace(/\s*/g, ""));
    toggleNPager();
    setPage(pno);
}

function onThemeClick(){
    if (this.disabled) return;
    var form = document.getElementById('filters');
    var this_theme = this.value + (this.value[this.value.length-1] == '.'?'':'.');
	for (var i=0; i<form.elements.length; i++) {
		var el = form.elements[i];
		if (el.type == 'checkbox' && el.name == 'theme' && el != this && !el.disabled) {
    		var el_theme = el.value + (el.value[el.value.length-1] == '.'?'':'.');
			if (el_theme.substr(0, this_theme.length) == this_theme) {
				el.checked = this.checked;
            } else if (!this.checked && this_theme.substr(0, el_theme.length) == el_theme) {
				el.checked = false;
            }
        }
    }
}

function initFilters() {
	var form = document.getElementById('filters');
	for (var i=0; i<form.elements.length; i++) {
		var el = form.elements[i];
		if (el.type == 'checkbox' && el.name == 'theme') {
			el.onclick = onThemeClick;
        }
    }
        }

function setAllThemes(all_themes) {
	var form = document.getElementById('filters');
	for (var i=0; i<form.elements.length; i++) {
		var el = form.elements[i];
		if (el.type == 'checkbox' && el.name == 'theme') {
			var el_theme = ',' + el.value + (el.value[el.value.length-1] == '.'?'':'.');
	        if (all_themes.indexOf(el_theme)==-1) {
	        	el.disabled = true;
	        	el.title = 'Нет заданий по данной теме';
	        }
        }
    }
}

initFilters();
showLoader();

</script>

<div class="pager-panel qblock" id="bottom_pager"></div>

</main>